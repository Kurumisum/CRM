# 电信CRM客户中心 - 用例图

## 一、系统角色定义

### 1.1 主要角色（Primary Actors）

| 角色 | 描述 | 职责 |
|------|------|------|
| 客户 | 服务的购买者和合同签约方 | 开户、销户、资料管理、账户充值 |
| 营业员 | 营业厅工作人员 | 协助客户办理各类业务 |
| 客服人员 | 客服热线工作人员 | 电话受理业务、解答咨询 |
| 系统管理员 | IT运维人员 | 系统配置、用户权限管理 |

### 1.2 次要角色（Secondary Actors）

| 角色 | 描述 | 交互方式 |
|------|------|---------|
| 订单中心 | 处理业务订单流程 | 系统间API调用 |
| 产商品中心 | 提供产品和套餐信息 | 系统间API调用 |
| 开通中心 | 执行服务开通操作 | 系统间API调用 |
| 计费中心 | 处理费用计算和账单 | 系统间API调用 |
| 认证系统 | 提供实名认证服务 | 系统间API调用 |
| 支付平台 | 处理支付交易 | 系统间API调用 |

## 二、客户管理用例

### 2.1 客户管理用例图

```
┌─────────────────────────────────────────────────────────────┐
│                    客户管理用例                               │
│                                                               │
│   ┌─────────┐                                                │
│   │  客户   │                                                │
│   └────┬────┘                                                │
│        │                                                      │
│        │                                                      │
│        ├───────────► (个人客户开户)                           │
│        │                    │                                 │
│        │                    │ «include»                       │
│        │                    ▼                                 │
│        │              (实名认证)                              │
│        │                                                      │
│        ├───────────► (家庭客户开户)                           │
│        │                    │                                 │
│        │                    │ «include»                       │
│        │                    ▼                                 │
│        │              (实名认证)                              │
│        │                                                      │
│        ├───────────► (政企客户开户)                           │
│        │                    │                                 │
│        │                    │ «include»                       │
│        │                    ▼                                 │
│        │              (企业资质验证)                          │
│        │                                                      │
│        ├───────────► (客户资料变更)                           │
│        │                    │                                 │
│        │                    │ «extend»                        │
│        │                    ▼                                 │
│        │              (重要信息变更需认证)                    │
│        │                                                      │
│        ├───────────► (客户等级查询)                           │
│        │                                                      │
│        ├───────────► (客户关系管理)                           │
│        │              - 添加家庭成员                          │
│        │              - 设置企业组织架构                      │
│        │                                                      │
│        └───────────► (客户销户)                               │
│                           │                                   │
│                           │ «include»                         │
│                           ▼                                   │
│                     (欠费检查)                                │
│                           │                                   │
│                           │ «include»                         │
│                           ▼                                   │
│                     (用户注销)                                │
│                                                               │
│                                                               │
│   ┌──────────┐                                               │
│   │ 营业员   │                                               │
│   └─────┬────┘                                               │
│         │                                                     │
│         └───────────► (协助客户办理)                          │
│                           │                                   │
│                           │ «extend»                          │
│                           ▼                                   │
│                     (权限验证)                                │
│                                                               │
└───────────────────────────────────────────────────────────────┘
```

### 2.2 客户管理用例详细说明

#### UC-01: 个人客户开户

**前置条件：**
- 客户未在系统中注册过
- 客户提供有效身份证件

**主流程：**
1. 客户提供身份证件信息（姓名、证件类型、证件号码）
2. 系统调用认证系统进行实名认证
3. 系统验证一证五户限制
4. 客户填写基本信息（联系电话、地址等）
5. 系统生成客户编号
6. 系统创建客户档案
7. 系统发送客户创建事件

**后置条件：**
- 客户开户成功，状态为"正常"
- 系统记录开户日志

**扩展流程：**
- 3a. 实名认证失败 → 提示客户并终止流程
- 3b. 超出一证五户限制 → 提示客户并终止流程

#### UC-02: 家庭客户开户

**前置条件：**
- 户主未在系统中注册家庭客户
- 户主提供有效身份证件

**主流程：**
1. 户主提供身份证件信息
2. 系统进行实名认证
3. 户主填写家庭信息（家庭名称、成员信息）
4. 系统验证家庭成员信息
5. 系统生成客户编号
6. 系统创建家庭客户档案
7. 系统关联家庭成员关系

**后置条件：**
- 家庭客户创建成功
- 家庭成员关系建立

#### UC-03: 政企客户开户

**前置条件：**
- 企业未在系统中注册
- 提供企业营业执照等资质文件

**主流程：**
1. 经办人提供企业资质信息
2. 系统验证企业资质（营业执照、组织机构代码）
3. 系统验证法人代表信息
4. 经办人填写企业基本信息
5. 系统生成客户编号
6. 系统创建政企客户档案
7. 系统设置企业联系人

**后置条件：**
- 政企客户创建成功
- 可以为企业开通多个用户

#### UC-04: 客户资料变更

**前置条件：**
- 客户已开户且状态正常

**主流程：**
1. 客户选择要变更的资料项
2. 客户提供新的信息
3. 系统验证信息的合法性
4. 系统更新客户档案
5. 系统记录变更历史
6. 系统发送客户资料变更事件

**扩展流程：**
- 3a. 变更姓名、证件号等重要信息 → 需要重新实名认证
- 3b. 信息验证失败 → 提示客户并终止流程

#### UC-05: 客户销户

**前置条件：**
- 客户已开户
- 客户提供有效身份证件

**主流程：**
1. 客户申请销户
2. 系统进行身份认证
3. 系统检查是否有欠费
4. 系统检查是否有未注销的用户
5. 系统结算余额并退费
6. 系统注销所有用户
7. 系统更新客户状态为"已销户"
8. 系统发送客户销户事件

**扩展流程：**
- 3a. 存在欠费 → 要求客户先缴清欠费
- 4a. 存在未注销用户 → 要求客户先注销所有用户

## 三、用户管理用例

### 3.1 用户管理用例图

```
┌─────────────────────────────────────────────────────────────┐
│                    用户管理用例                               │
│                                                               │
│   ┌─────────┐                                                │
│   │  客户   │                                                │
│   └────┬────┘                                                │
│        │                                                      │
│        │                                                      │
│        ├───────────► (个人用户开户)                           │
│        │                    │                                 │
│        │                    │ «include»                       │
│        │                    ├────► (选择号码)                 │
│        │                    │                                 │
│        │                    │ «include»                       │
│        │                    ├────► (选择套餐)                 │
│        │                    │                                 │
│        │                    │ «include»                       │
│        │                    └────► (选择SIM卡)                │
│        │                                                      │
│        ├───────────► (群用户开户)                             │
│        │                                                      │
│        ├───────────► (用户激活)                               │
│        │                                                      │
│        ├───────────► (用户停机)                               │
│        │              - 欠费停机(自动)                        │
│        │              - 申请停机(主动)                        │
│        │                                                      │
│        ├───────────► (用户复机)                               │
│        │                    │                                 │
│        │                    │ «extend»                        │
│        │                    ▼                                 │
│        │              (欠费停机需缴费)                        │
│        │                                                      │
│        ├───────────► (套餐变更)                               │
│        │                    │                                 │
│        │                    │ «include»                       │
│        │                    └────► (选择生效时间)             │
│        │                                                      │
│        ├───────────► (换卡)                                   │
│        │              - SIM卡损坏                             │
│        │              - 升级4G/5G                             │
│        │                                                      │
│        ├───────────► (补卡)                                   │
│        │                    │                                 │
│        │                    │ «include»                       │
│        │                    └────► (SIM卡挂失)                │
│        │                                                      │
│        ├───────────► (用户过户)                               │
│        │                    │                                 │
│        │                    │ «include»                       │
│        │                    ├────► (新客户身份验证)           │
│        │                    │                                 │
│        │                    │ «include»                       │
│        │                    └────► (原客户同意确认)           │
│        │                                                      │
│        ├───────────► (用户销户)                               │
│        │                    │                                 │
│        │                    │ «include»                       │
│        │                    ├────► (欠费检查)                 │
│        │                    │                                 │
│        │                    │ «include»                       │
│        │                    └────► (进入预销户期)             │
│        │                                                      │
│        └───────────► (用户信息查询)                           │
│                                                               │
│                                                               │
│                           ┌──────────────┐                    │
│                           │  开通中心    │                    │
│                           └──────┬───────┘                    │
│                                  │                            │
│                                  │                            │
│        (个人用户开户) ───────────►│                            │
│                                  │                            │
│                                  ▼                            │
│                           (网络资源开通)                      │
│                           - IMSI写入HLR                       │
│                           - 开通GPRS                          │
│                           - 激活增值业务                      │
│                                                               │
└───────────────────────────────────────────────────────────────┘
```

### 3.2 用户管理用例详细说明

#### UC-10: 个人用户开户

**前置条件：**
- 客户已开户且状态正常
- 客户未超出最大用户数限制

**主流程：**
1. 客户选择号码（从号码池或输入指定号码）
2. 系统验证号码可用性
3. 客户选择资费套餐
4. 客户选择SIM卡类型（4G/5G）
5. 系统生成用户编号
6. 系统创建用户记录（状态为"预开"）
7. 系统调用开通中心进行网络开通
8. 营业员交付SIM卡给客户
9. 系统记录开户信息

**后置条件：**
- 用户创建成功，状态为"预开"
- 等待客户激活

**扩展流程：**
- 2a. 号码不可用（已被占用） → 提示客户重新选号
- 7a. 网络开通失败 → 回滚用户创建，提示错误

#### UC-11: 用户激活

**前置条件：**
- 用户状态为"预开"
- SIM卡已插入手机

**主流程：**
1. 用户插入SIM卡并开机
2. 系统检测到激活信号
3. 系统更新用户状态为"正常"
4. 系统记录激活时间
5. 系统发送用户激活事件
6. 系统开始计算月租费

**后置条件：**
- 用户激活成功，可以正常使用服务

#### UC-12: 套餐变更

**前置条件：**
- 用户状态为"正常"

**主流程：**
1. 客户选择新的资费套餐
2. 系统验证套餐可用性
3. 系统检查套餐变更规则（互斥、依赖）
4. 客户选择生效时间（立即/次月）
5. 系统计算费用补差
6. 系统更新套餐信息
7. 系统记录套餐变更历史
8. 系统发送套餐变更事件

**后置条件：**
- 套餐变更成功，按照选定时间生效

**扩展流程：**
- 3a. 套餐互斥检查失败 → 提示客户先退订互斥产品
- 4a. 立即生效 → 计算当月补差费，立即扣费

#### UC-13: 换卡

**前置条件：**
- 用户状态为"正常"或"停机"
- 客户提供有效身份证件

**主流程：**
1. 客户申请换卡（说明原因）
2. 系统验证客户身份
3. 营业员选择新的SIM卡
4. 系统记录新旧SIM卡对应关系
5. 系统调用开通中心更新HLR信息
6. 系统更新用户的SIM卡信息
7. 营业员交付新SIM卡给客户
8. 系统发送换卡事件

**后置条件：**
- 换卡成功，新SIM卡可以正常使用
- 旧SIM卡失效

#### UC-14: 用户过户

**前置条件：**
- 用户状态为"正常"
- 原客户和新客户都已实名认证

**主流程：**
1. 原客户申请过户
2. 系统验证原客户身份
3. 新客户提供身份信息
4. 系统验证新客户信息
5. 系统检查新客户的用户数限制
6. 原客户确认过户
7. 新客户确认接受
8. 系统检查欠费情况
9. 系统更新用户的归属客户
10. 系统发送用户过户事件

**后置条件：**
- 用户归属客户变更
- 费用由新客户承担

**扩展流程：**
- 5a. 新客户超出用户数限制 → 提示并终止流程
- 8a. 存在欠费 → 要求先结清欠费

#### UC-15: 用户销户

**前置条件：**
- 用户存在于系统中
- 客户提供有效身份证件

**主流程：**
1. 客户申请销户
2. 系统验证客户身份
3. 系统检查欠费情况
4. 系统检查合约限制（如在网时长承诺）
5. 系统更新用户状态为"预销户"
6. 系统设置预销户到期时间（30天后）
7. 系统发送用户预销户事件
8. 30天后，系统自动确认销户
9. 系统更新用户状态为"已销户"
10. 系统将号码加入回收池

**后置条件：**
- 用户销户成功
- 号码进入冷冻期

**扩展流程：**
- 3a. 存在欠费 → 要求先结清欠费
- 4a. 违反合约限制 → 提示需支付违约金
- 7a. 客户在30天内申请取消销户 → 恢复用户状态为"正常"

## 四、账户管理用例

### 4.1 账户管理用例图

```
┌─────────────────────────────────────────────────────────────┐
│                    账户管理用例                               │
│                                                               │
│   ┌─────────┐                                                │
│   │  客户   │                                                │
│   └────┬────┘                                                │
│        │                                                      │
│        │                                                      │
│        ├───────────► (账户开立)                               │
│        │              - 预付费账户                            │
│        │              - 后付费账户                            │
│        │                                                      │
│        ├───────────► (账户充值)                               │
│        │                    │                                 │
│        │                    │ «include»                       │
│        │                    ├────► (选择充值方式)             │
│        │                    │      - 现金                     │
│        │                    │      - 银行卡                   │
│        │                    │      - 支付宝/微信              │
│        │                    │                                 │
│        │                    │ «include»                       │
│        │                    └────► (支付处理)                 │
│        │                                                      │
│        ├───────────► (账户余额查询)                           │
│        │                                                      │
│        ├───────────► (账户交易记录查询)                       │
│        │                                                      │
│        ├───────────► (绑定用户)                               │
│        │              - 设置扣费优先级                        │
│        │                                                      │
│        ├───────────► (解绑用户)                               │
│        │                                                      │
│        └───────────► (账户关闭)                               │
│                           │                                   │
│                           │ «include»                         │
│                           └────► (余额退还)                   │
│                                                               │
│                                                               │
│                           ┌──────────────┐                    │
│                           │  计费中心    │                    │
│                           └──────┬───────┘                    │
│                                  │                            │
│                                  │                            │
│        (账户充值) ◄──────────────┤                            │
│                                  │                            │
│                                  ▼                            │
│                           (账户扣费)                          │
│                           - 月租费扣除                        │
│                           - 通话费扣除                        │
│                           - 流量费扣除                        │
│                                  │                            │
│                                  │ «extend»                   │
│                                  ▼                            │
│                           (余额不足处理)                      │
│                           - 发送欠费通知                      │
│                           - 触发停机流程                      │
│                                                               │
└───────────────────────────────────────────────────────────────┘
```

### 4.2 账户管理用例详细说明

#### UC-20: 账户开立

**前置条件：**
- 客户已开户且状态正常

**主流程：**
1. 客户选择账户类型（预付费/后付费）
2. 系统验证客户信用等级（后付费需要）
3. 系统生成账户编号
4. 系统创建账户记录
5. 系统初始化账户余额为0
6. 系统关联账户与客户
7. 系统发送账户开立事件

**后置条件：**
- 账户创建成功，状态为"正常"

**扩展流程：**
- 2a. 后付费账户，客户信用等级不足 → 拒绝开立或降低信用额度

#### UC-21: 账户充值

**前置条件：**
- 账户状态为"正常"

**主流程：**
1. 客户选择充值金额
2. 客户选择充值方式（现金/银行卡/支付宝/微信）
3. 系统生成充值订单
4. 系统调用支付平台处理支付
5. 支付平台返回支付成功
6. 系统增加账户余额
7. 系统生成交易记录
8. 系统发送账户充值事件
9. 系统发送充值成功通知

**后置条件：**
- 账户余额增加
- 生成充值交易记录

**扩展流程：**
- 5a. 支付失败 → 提示客户重新支付
- 5b. 支付超时 → 取消充值订单

#### UC-22: 账户扣费

**前置条件：**
- 账户状态为"正常"
- 计费中心发起扣费请求

**主流程：**
1. 计费中心发送扣费请求（金额、原因）
2. 系统检查账户可用余额
3. 系统扣除账户余额
4. 系统生成交易记录
5. 系统发送账户扣费事件
6. 系统返回扣费成功

**后置条件：**
- 账户余额减少
- 生成扣费交易记录

**扩展流程：**
- 2a. 可用余额不足 → 发送余额不足事件，触发停机流程

#### UC-23: 绑定用户

**前置条件：**
- 账户和用户都存在且属于同一客户

**主流程：**
1. 客户选择要绑定的用户
2. 客户设置扣费优先级
3. 系统验证用户归属
4. 系统创建账户-用户关联关系
5. 系统发送用户账户绑定事件

**后置条件：**
- 用户与账户绑定成功
- 用户费用从该账户扣除

**扩展流程：**
- 3a. 用户不属于该客户 → 拒绝绑定

#### UC-24: 账户关闭

**前置条件：**
- 账户下没有绑定的用户
- 客户提供有效身份证件

**主流程：**
1. 客户申请关闭账户
2. 系统验证客户身份
3. 系统检查是否有绑定用户
4. 系统检查账户余额
5. 系统退还账户余额
6. 系统更新账户状态为"已关闭"
7. 系统发送账户关闭事件

**后置条件：**
- 账户关闭成功
- 余额已退还

**扩展流程：**
- 3a. 存在绑定用户 → 要求先解绑所有用户
- 4a. 账户余额为0 → 跳过退款步骤

## 五、产品订购用例

### 5.1 产品订购用例图

```
┌─────────────────────────────────────────────────────────────┐
│                    产品订购用例                               │
│                                                               │
│   ┌─────────┐                                                │
│   │  客户   │                                                │
│   └────┬────┘                                                │
│        │                                                      │
│        │                                                      │
│        ├───────────► (订购产品)                               │
│        │                    │                                 │
│        │                    │ «include»                       │
│        │                    ├────► (查询可订购产品)           │
│        │                    │                                 │
│        │                    │ «include»                       │
│        │                    ├────► (检查订购规则)             │
│        │                    │      - 互斥检查                 │
│        │                    │      - 依赖检查                 │
│        │                    │                                 │
│        │                    │ «include»                       │
│        │                    └────► (设置生效时间)             │
│        │                                                      │
│        ├───────────► (退订产品)                               │
│        │                                                      │
│        ├───────────► (产品变更)                               │
│        │              - 套餐升级/降级                         │
│        │              - 流量包变更                            │
│        │                                                      │
│        ├───────────► (已订购产品查询)                         │
│        │                                                      │
│        └───────────► (订购历史查询)                           │
│                                                               │
│                                                               │
│                           ┌──────────────┐                    │
│                           │ 产商品中心   │                    │
│                           └──────┬───────┘                    │
│                                  │                            │
│                                  ▼                            │
│        (订购产品) ──────────► (产品信息查询)                  │
│                                  - 产品属性                   │
│                                  - 订购规则                   │
│                                  - 互斥依赖关系               │
│                                                               │
└───────────────────────────────────────────────────────────────┘
```

### 5.2 产品订购用例详细说明

#### UC-30: 订购产品

**前置条件：**
- 用户状态为"正常"
- 产品可订购

**主流程：**
1. 客户浏览可订购产品列表
2. 客户选择要订购的产品
3. 系统查询产品详细信息
4. 系统检查产品订购规则
5. 系统检查互斥产品
6. 系统检查依赖产品
7. 客户选择生效时间
8. 系统创建订购记录
9. 系统发送产品订购事件
10. 系统通知开通中心执行开通

**后置条件：**
- 产品订购成功
- 按照设定时间生效

**扩展流程：**
- 5a. 存在互斥产品 → 提示客户先退订互斥产品
- 6a. 缺少依赖产品 → 提示客户先订购依赖产品

#### UC-31: 退订产品

**前置条件：**
- 产品已订购且生效中

**主流程：**
1. 客户选择要退订的产品
2. 系统检查产品退订规则
3. 系统检查是否有依赖该产品的其他产品
4. 客户确认退订
5. 系统更新订购状态为"已取消"
6. 系统发送产品退订事件
7. 系统通知开通中心执行关闭

**后置条件：**
- 产品退订成功
- 立即失效或次月失效

**扩展流程：**
- 3a. 存在依赖产品 → 提示客户先退订依赖产品

## 六、跨用例场景

### 6.1 完整开户流程

这是一个跨多个用例的端到端业务场景：

**场景：新客户办理手机业务**

1. 客户到营业厅
2. **客户开户** (UC-01)
   - 提供身份证
   - 实名认证
   - 填写基本信息
3. **用户开户** (UC-10)
   - 选择号码
   - 选择套餐
   - 选择SIM卡
4. **账户开立** (UC-20)
   - 开立预付费账户
5. **绑定用户** (UC-23)
   - 将用户绑定到账户
6. **账户充值** (UC-21)
   - 充值100元
7. **订购产品** (UC-30)
   - 订购流量包
8. 营业员交付SIM卡
9. **用户激活** (UC-11)
   - 插卡开机激活

**涉及的系统交互：**
- 认证系统：实名认证
- 产商品中心：查询套餐和产品信息
- 开通中心：网络资源开通
- 支付平台：处理充值支付
- 计费中心：记录费用

## 七、用例优先级

### 7.1 高优先级用例（P0）
必须实现的核心功能，占业务量90%以上：
- UC-01: 个人客户开户
- UC-10: 个人用户开户
- UC-11: 用户激活
- UC-12: 套餐变更
- UC-21: 账户充值
- UC-30: 订购产品

### 7.2 中优先级用例（P1）
重要功能，需要支持但频率较低：
- UC-02: 家庭客户开户
- UC-03: 政企客户开户
- UC-13: 换卡
- UC-14: 用户过户
- UC-15: 用户销户
- UC-23: 绑定用户

### 7.3 低优先级用例（P2）
支持性功能：
- UC-04: 客户资料变更
- UC-05: 客户销户
- UC-24: 账户关闭
- UC-31: 退订产品

## 八、非功能性需求

### 8.1 性能需求
- 开户流程响应时间 < 3秒
- 查询操作响应时间 < 1秒
- 支持300W/天业务办理量
- 支持4亿次/天服务调用

### 8.2 可用性需求
- 系统可用性 ≥ 99.9%
- 核心功能故障恢复时间 < 30分钟

### 8.3 安全性需求
- 所有操作需要身份认证
- 敏感数据加密存储
- 操作日志完整记录

### 8.4 可扩展性需求
- 支持水平扩展
- 支持新产品快速接入
- 支持新渠道快速接入

## 九、总结

本用例图设计涵盖了电信CRM客户中心的核心业务场景，包括：
1. **客户管理**：支持3种客户类型的全生命周期管理
2. **用户管理**：涵盖高频业务场景（占比90%以上）
3. **账户管理**：支持多种账户类型和支付方式
4. **产品订购**：支持灵活的产品订购和变更

设计遵循以下原则：
- **用户中心**：所有设计以用户体验为中心
- **业务完整性**：覆盖端到端的业务流程
- **可扩展性**：支持未来业务的扩展
- **合规性**：符合电信行业监管要求
